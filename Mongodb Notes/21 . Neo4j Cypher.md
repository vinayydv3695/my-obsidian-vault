

# # ⭐ 1. Introduction to Cypher

Cypher is the **declarative query language** of Neo4j.

### **Graph Concepts**

- **Nodes**: Entities
    
    - Written as:
        
        ```
        (:Label)
        ```
        
- **Relationships**: Directed links between nodes
    
    - Written as:
        
        ```
        ()-[:TYPE]->()
        ```
        
- **Properties**: Key–value pairs
    
    - Example:
        
        ```
        { name: "Ankit Jain", since: 2015 }
        ```
        

Cypher matches patterns visually similar to the graph itself.

---

# ---------------------------------------------------------

# # ⭐ 2. Clearing and Creating Data

### **Clear Entire Database**

```cypher
MATCH (n) DETACH DELETE n;
```

`DETACH DELETE` removes nodes + their relationships.

---

### **Create Example Data**

```cypher
MERGE (p:Person {name: 'Ankit Jain'})
MERGE (c:Company {name: 'Neo4j'})
MERGE (p)-[:WORKS_AT {since: 2015}]->(c);
```

MERGE ensures nodes/relationships **exist exactly once** (idempotent).

---

# ---------------------------------------------------------

# # ⭐ 3. Querying Data

### **Return Entire Node**

```cypher
MATCH (p:Person {name: 'Ankit Jain'})
RETURN p;
```

### **Return Specific Property**

```cypher
MATCH (p:Person {name: 'Ankit Jain'})
RETURN p.designation;
```

### **Filtering with WHERE**

```cypher
MATCH (p:Person)
WHERE p.name = 'Ankit Jain'
RETURN p.designation;
```

---

# ---------------------------------------------------------

# # ⭐ 4. Filtering Records

### **Filter by Multiple Values**

```cypher
MATCH (p:Person)
WHERE p.name = 'Ankit Jain' OR p.name = 'Sneha Kapoor'
RETURN p.designation;
```

### **Filter by Range (on relationship properties)**

```cypher
MATCH (p:Person)-[r:WORKS_AT]->(c:Company)
WHERE 2000 <= r.since <= 2015
RETURN p.name;
```

### **Filter by String Match**

```cypher
MATCH (p:Person)-[:WORKS_AT]->()
WHERE p.name STARTS WITH 'R'
RETURN p.name;
```

---

# ---------------------------------------------------------

# # ⭐ 5. MERGE vs CREATE

### **CREATE**

- Always makes a new node or relationship
    
- No checking for duplicates
    

### **MERGE**

- Find-or-create
    
- Ensures a unique pattern exists
    
- Idempotent
    

**Example:**

```cypher
MERGE (p:Person {name: 'Naveen'})
MERGE (c:Company {name: 'Meta'})
MERGE (p)-[:WORKS_AT]->(c);
```

---

# ---------------------------------------------------------

# # ⭐ 6. Updating Data

### **Update Relationship Properties**

```cypher
MATCH (p:Person)-[r:WORKED_AT]->(c:Company)
WHERE p.name = 'Ankit Jain' AND c.name = 'Infosys'
SET r.roles = ['Manager'], 
    r.domain = 'telecom'
RETURN p, r, c;
```

### **Remove Properties**

```cypher
REMOVE r.roles
```

OR

```cypher
SET r.roles = null
```

---

# ---------------------------------------------------------

# # ⭐ 7. Advanced MERGE (ON CREATE / ON MATCH)

```cypher
MERGE (p:Person {name: 'McKenna Grace'})
  ON CREATE SET p.createdAt = datetime()
  ON MATCH  SET p.updatedAt = datetime()
SET p.born = 2006
RETURN p;
```

- `ON CREATE` executes **only if new node is created**
    
- `ON MATCH` executes if **existing node is matched**
    

---

# ---------------------------------------------------------

# # ⭐ 8. Deleting Data

### ❌ Delete Node (Fails if relationships exist)

```cypher
MATCH (p:Person {name: 'Ankit Jain'})
DELETE p;
```

### ✔ Delete Node + All Its Relationships

```cypher
MATCH (p:Person {name: 'Ankit Jain'})
DETACH DELETE p;
```

---

# ---------------------------------------------------------

# # ⭐ 9. Utility Functions

### **List All Property Keys in the Graph**

```cypher
CALL db.propertyKeys();
```

---

# ---------------------------------------------------------

# # ⭐ 10. Summary (Recap)

- Nodes: `()`
    
- Relationships: `[]`
    
- Properties: `{}`
    
- CREATE → Always create
    
- MERGE → Find or create
    
- WHERE → Filter
    
- SET / REMOVE → Update / delete properties
    
- DETACH DELETE → Remove node + relationships
    

---

# ---------------------------------------------------------

# ⭐ **20 MCQs
---

### **1. Cypher represents a node as:**

A) {}  
B) []  
C) ()  
D) <>  
**Answer: C**

---

### **2. A relationship in Cypher is written as:**

A) ()-()-()  
B) []-()  
C) ()-[:TYPE]->()  
D) {}→{}  
**Answer: C**

---

### **3. Properties in Neo4j are stored as:**

A) key:value tuples  
B) JSON objects  
C) key-value pairs inside `{}`  
D) CSV fields  
**Answer: C**

---

### **4. Which deletes all data from a graph safely?**

A) DELETE *  
B) REMOVE ALL  
C) MATCH (n) DELETE n  
D) MATCH (n) DETACH DELETE n  
**Answer: D**

---

### **5. MERGE ensures:**

A) Only creation happens  
B) Node appears multiple times  
C) Idempotent create-or-match behavior  
D) Deletes duplicates  
**Answer: C**

---

### **6. CREATE always:**

A) Searches first  
B) Overwrites old data  
C) Creates new nodes/relationships  
D) Deletes existing nodes  
**Answer: C**

---

### **7. Query to return a Person node named Ankit:**

A) MATCH p:Person RETURN name  
B) MATCH (p:Person {name:'Ankit Jain'}) RETURN p  
C) GET (Person:Ankit)  
D) FIND Person 'Ankit Jain'  
**Answer: B**

---

### **8. To return only one property:**

A) RETURN p  
B) RETURN property(p)  
C) RETURN p.designation  
D) SHOW p.designation  
**Answer: C**

---

### **9. WHERE filters results by:**

A) Node only  
B) Relationships only  
C) Conditions (values, ranges, strings)  
D) Schema rules  
**Answer: C**

---

### **10. Range filtering on relationships uses:**

A) BETWEEN  
B) 2000 <= r.since <= 2015  
C) r.since IN RANGE  
D) RANGE(r.since)  
**Answer: B**

---

### **11. To match names starting with 'R':**

A) LIKE 'R%'  
B) p.name STARTS WITH 'R'  
C) BEGIN 'R'  
D) prefix(p.name,'R')  
**Answer: B**

---

### **12. REMOVE r.roles does what?**

A) Deletes node  
B) Deletes relationship  
C) Deletes that property  
D) Unlinks nodes  
**Answer: C**

---

### **13. DETACH DELETE does what?**

A) Deletes only relationships  
B) Deletes only nodes  
C) Deletes node + all its relationships  
D) Archives node  
**Answer: C**

---

### **14. ON CREATE in MERGE runs when:**

A) Node already exists  
B) Node is newly created  
C) Query errors  
D) Relationship match fails  
**Answer: B**

---

### **15. ON MATCH in MERGE runs when:**

A) New node created  
B) Old node matched  
C) No pattern found  
D) Node label removed  
**Answer: B**

---

### **16. Which keyword updates properties?**

A) EDIT  
B) UPDATE  
C) SET  
D) REPLACE  
**Answer: C**

---

### **17. Query to list all property keys:**

A) SHOW KEYS  
B) GET PROPERTIES  
C) CALL db.propertyKeys()  
D) LIST PROPERTIES  
**Answer: C**

---

### **18. MERGE (p:Person {name:'Naveen'}) means:**

A) Always create  
B) Create if not exists  
C) Delete if exists  
D) Compare only  
**Answer: B**

---

### **19. DELETE fails when:**

A) Node has properties  
B) Node has relationships  
C) Node label is Person  
D) Node name is NULL  
**Answer: B**

---

### **20. String filtering uses:**

A) p.name PARTIAL 'A'  
B) p.name HAS 'A'  
C) p.name STARTS WITH 'A'  
D) substr(name)  
**Answer: C**

---

